<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>菜单测试</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
            background: #1a1a2e;
            color: white;
        }
        
        .test-container {
            max-width: 400px;
            margin: 0 auto;
        }
        
        .test-button {
            display: block;
            width: 100%;
            padding: 15px;
            margin: 10px 0;
            background: #00ff88;
            color: black;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
        }
        
        .test-button:hover {
            background: #00cc6a;
        }
        
        .status {
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            margin: 20px 0;
        }
        
        .status h3 {
            margin-top: 0;
        }
        
        .status-item {
            padding: 5px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .success {
            color: #00ff88;
        }
        
        .error {
            color: #ff4444;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>移动端菜单测试页面</h1>
        
        <button class="test-button" onclick="testMenu()">测试菜单功能</button>
        <button class="test-button" onclick="checkElements()">检查元素状态</button>
        <button class="test-button" onclick="forceOpenMenu()">强制打开菜单</button>
        <button class="test-button" onclick="forceCloseMenu()">强制关闭菜单</button>
        
        <div class="status" id="status">
            <h3>测试结果</h3>
            <div id="results"></div>
        </div>
    </div>
    
    <script>
        function checkElements() {
            const results = document.getElementById('results');
            results.innerHTML = '';
            
            // 检查按钮
            const button = document.getElementById('navToggle');
            const buttonExists = button !== null;
            addResult('汉堡按钮存在', buttonExists);
            
            if (buttonExists) {
                const hasActiveClass = button.classList.contains('active');
                addResult('按钮active状态', hasActiveClass);
            }
            
            // 检查菜单
            const menu = document.getElementById('navMenu');
            const menuExists = menu !== null;
            addResult('菜单元素存在', menuExists);
            
            if (menuExists) {
                const hasActiveClass = menu.classList.contains('active');
                const computedStyle = window.getComputedStyle(menu);
                const isVisible = computedStyle.visibility === 'visible';
                const opacity = computedStyle.opacity;
                const transform = computedStyle.transform;
                const display = computedStyle.display;
                
                addResult('菜单active状态', hasActiveClass);
                addResult('菜单visibility', isVisible ? 'visible' : computedStyle.visibility);
                addResult('菜单opacity', opacity);
                addResult('菜单transform', transform);
                addResult('菜单display', display);
            }
        }
        
        function testMenu() {
            const button = document.getElementById('navToggle');
            if (button) {
                button.click();
                setTimeout(() => {
                    checkElements();
                }, 500);
            } else {
                addResult('错误：找不到汉堡按钮', false);
            }
        }
        
        function forceOpenMenu() {
            const menu = document.getElementById('navMenu');
            const button = document.getElementById('navToggle');
            
            if (menu) {
                menu.classList.add('active');
                menu.style.display = 'flex';
                menu.style.visibility = 'visible';
                menu.style.opacity = '1';
                menu.style.transform = 'translateY(0)';
                menu.style.pointerEvents = 'auto';
            }
            
            if (button) {
                button.classList.add('active');
            }
            
            setTimeout(() => {
                checkElements();
            }, 100);
        }
        
        function forceCloseMenu() {
            const menu = document.getElementById('navMenu');
            const button = document.getElementById('navToggle');
            
            if (menu) {
                menu.classList.remove('active');
                menu.style.display = '';
                menu.style.visibility = '';
                menu.style.opacity = '';
                menu.style.transform = '';
                menu.style.pointerEvents = '';
            }
            
            if (button) {
                button.classList.remove('active');
            }
            
            setTimeout(() => {
                checkElements();
            }, 100);
        }
        
        function addResult(text, success) {
            const results = document.getElementById('results');
            const item = document.createElement('div');
            item.className = 'status-item';
            
            if (typeof success === 'boolean') {
                item.innerHTML = `${text}: <span class="${success ? 'success' : 'error'}">${success ? '✓' : '✗'}</span>`;
            } else {
                item.innerHTML = `${text}: <span>${success}</span>`;
            }
            
            results.appendChild(item);
        }
        
        // 初始检查
        window.addEventListener('load', () => {
            checkElements();
        });
    </script>
</body>
</html>